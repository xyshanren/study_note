<!DOCTYPE html>
<html>
<head>
<title>使用笔记.md</title>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8">

<style>
/* https://github.com/microsoft/vscode/blob/master/extensions/markdown-language-features/media/markdown.css */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

body {
	font-family: var(--vscode-markdown-font-family, -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif);
	font-size: var(--vscode-markdown-font-size, 14px);
	padding: 0 26px;
	line-height: var(--vscode-markdown-line-height, 22px);
	word-wrap: break-word;
}

#code-csp-warning {
	position: fixed;
	top: 0;
	right: 0;
	color: white;
	margin: 16px;
	text-align: center;
	font-size: 12px;
	font-family: sans-serif;
	background-color:#444444;
	cursor: pointer;
	padding: 6px;
	box-shadow: 1px 1px 1px rgba(0,0,0,.25);
}

#code-csp-warning:hover {
	text-decoration: none;
	background-color:#007acc;
	box-shadow: 2px 2px 2px rgba(0,0,0,.25);
}

body.scrollBeyondLastLine {
	margin-bottom: calc(100vh - 22px);
}

body.showEditorSelection .code-line {
	position: relative;
}

body.showEditorSelection .code-active-line:before,
body.showEditorSelection .code-line:hover:before {
	content: "";
	display: block;
	position: absolute;
	top: 0;
	left: -12px;
	height: 100%;
}

body.showEditorSelection li.code-active-line:before,
body.showEditorSelection li.code-line:hover:before {
	left: -30px;
}

.vscode-light.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(0, 0, 0, 0.15);
}

.vscode-light.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(0, 0, 0, 0.40);
}

.vscode-light.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-dark.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 255, 255, 0.4);
}

.vscode-dark.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 255, 255, 0.60);
}

.vscode-dark.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-high-contrast.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 160, 0, 0.7);
}

.vscode-high-contrast.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 160, 0, 1);
}

.vscode-high-contrast.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

img {
	max-width: 100%;
	max-height: 100%;
}

a {
	text-decoration: none;
}

a:hover {
	text-decoration: underline;
}

a:focus,
input:focus,
select:focus,
textarea:focus {
	outline: 1px solid -webkit-focus-ring-color;
	outline-offset: -1px;
}

hr {
	border: 0;
	height: 2px;
	border-bottom: 2px solid;
}

h1 {
	padding-bottom: 0.3em;
	line-height: 1.2;
	border-bottom-width: 1px;
	border-bottom-style: solid;
}

h1, h2, h3 {
	font-weight: normal;
}

table {
	border-collapse: collapse;
}

table > thead > tr > th {
	text-align: left;
	border-bottom: 1px solid;
}

table > thead > tr > th,
table > thead > tr > td,
table > tbody > tr > th,
table > tbody > tr > td {
	padding: 5px 10px;
}

table > tbody > tr + tr > td {
	border-top: 1px solid;
}

blockquote {
	margin: 0 7px 0 5px;
	padding: 0 16px 0 10px;
	border-left-width: 5px;
	border-left-style: solid;
}

code {
	font-family: Menlo, Monaco, Consolas, "Droid Sans Mono", "Courier New", monospace, "Droid Sans Fallback";
	font-size: 1em;
	line-height: 1.357em;
}

body.wordWrap pre {
	white-space: pre-wrap;
}

pre:not(.hljs),
pre.hljs code > div {
	padding: 16px;
	border-radius: 3px;
	overflow: auto;
}

pre code {
	color: var(--vscode-editor-foreground);
	tab-size: 4;
}

/** Theming */

.vscode-light pre {
	background-color: rgba(220, 220, 220, 0.4);
}

.vscode-dark pre {
	background-color: rgba(10, 10, 10, 0.4);
}

.vscode-high-contrast pre {
	background-color: rgb(0, 0, 0);
}

.vscode-high-contrast h1 {
	border-color: rgb(0, 0, 0);
}

.vscode-light table > thead > tr > th {
	border-color: rgba(0, 0, 0, 0.69);
}

.vscode-dark table > thead > tr > th {
	border-color: rgba(255, 255, 255, 0.69);
}

.vscode-light h1,
.vscode-light hr,
.vscode-light table > tbody > tr + tr > td {
	border-color: rgba(0, 0, 0, 0.18);
}

.vscode-dark h1,
.vscode-dark hr,
.vscode-dark table > tbody > tr + tr > td {
	border-color: rgba(255, 255, 255, 0.18);
}

</style>

<style>
/* Tomorrow Theme */
/* http://jmblog.github.com/color-themes-for-google-code-highlightjs */
/* Original theme - https://github.com/chriskempson/tomorrow-theme */

/* Tomorrow Comment */
.hljs-comment,
.hljs-quote {
	color: #8e908c;
}

/* Tomorrow Red */
.hljs-variable,
.hljs-template-variable,
.hljs-tag,
.hljs-name,
.hljs-selector-id,
.hljs-selector-class,
.hljs-regexp,
.hljs-deletion {
	color: #c82829;
}

/* Tomorrow Orange */
.hljs-number,
.hljs-built_in,
.hljs-builtin-name,
.hljs-literal,
.hljs-type,
.hljs-params,
.hljs-meta,
.hljs-link {
	color: #f5871f;
}

/* Tomorrow Yellow */
.hljs-attribute {
	color: #eab700;
}

/* Tomorrow Green */
.hljs-string,
.hljs-symbol,
.hljs-bullet,
.hljs-addition {
	color: #718c00;
}

/* Tomorrow Blue */
.hljs-title,
.hljs-section {
	color: #4271ae;
}

/* Tomorrow Purple */
.hljs-keyword,
.hljs-selector-tag {
	color: #8959a8;
}

.hljs {
	display: block;
	overflow-x: auto;
	color: #4d4d4c;
	padding: 0.5em;
}

.hljs-emphasis {
	font-style: italic;
}

.hljs-strong {
	font-weight: bold;
}
</style>

<style>
/*
 * Markdown PDF CSS
 */

 body {
	font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif, "Meiryo";
	padding: 0 12px;
}

pre {
	background-color: #f8f8f8;
	border: 1px solid #cccccc;
	border-radius: 3px;
	overflow-x: auto;
	white-space: pre-wrap;
	overflow-wrap: break-word;
}

pre:not(.hljs) {
	padding: 23px;
	line-height: 19px;
}

blockquote {
	background: rgba(127, 127, 127, 0.1);
	border-color: rgba(0, 122, 204, 0.5);
}

.emoji {
	height: 1.4em;
}

code {
	font-size: 14px;
	line-height: 19px;
}

/* for inline code */
:not(pre):not(.hljs) > code {
	color: #C9AE75; /* Change the old color so it seems less like an error */
	font-size: inherit;
}

/* Page Break : use <div class="page"/> to insert page break
-------------------------------------------------------- */
.page {
	page-break-after: always;
}

</style>

<script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
</head>
<body>
  <script>
    mermaid.initialize({
      startOnLoad: true,
      theme: document.body.classList.contains('vscode-dark') || document.body.classList.contains('vscode-high-contrast')
          ? 'dark'
          : 'default'
    });
  </script>
<!--
 * @Autor: 逍遥山人
 * @Date: 2019-12-19 17:30:22
 * @LastEditors: 李逍遥
 * @LastEditTime: 2021-02-21 21:06:50
 * @Descriptiong: 
 -->
<h1 id="mysql%E6%97%A5%E5%B8%B8%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0">MySQL日常使用笔记</h1>
<blockquote>
<p>逍遥山人的MySQL使用笔记，持续更新中</p>
</blockquote>
<ul>
<li><a href="#mysql%E6%97%A5%E5%B8%B8%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0">MySQL日常使用笔记</a>
<ul>
<li><a href="#%E6%9C%8D%E5%8A%A1">服务</a>
<ul>
<li><a href="#%E6%9F%A5%E7%9C%8B%E6%9C%8D%E5%8A%A1%E5%B1%9E%E6%80%A7">查看服务属性</a></li>
<li><a href="#%E5%AD%97%E7%AC%A6%E9%9B%86%E5%92%8C%E5%AD%97%E7%AC%A6%E5%BA%8F">字符集和字符序</a></li>
</ul>
</li>
<li><a href="#%E5%BA%93">库</a></li>
<li><a href="#%E8%A1%A8%E5%AE%9A%E4%B9%89">表定义</a>
<ul>
<li><a href="#%E5%A2%9E">增</a></li>
<li><a href="#%E5%88%A0%E5%92%8C%E6%94%B9">删和改</a></li>
<li><a href="#%E6%9F%A5">查</a></li>
</ul>
</li>
<li><a href="#%E6%B3%A8%E9%87%8A">注释</a></li>
<li><a href="#dml">DML</a>
<ul>
<li><a href="#insert">INSERT</a></li>
<li><a href="#update">UPDATE</a></li>
<li><a href="#delete">DELETE</a></li>
</ul>
</li>
<li><a href="#dql">DQL</a>
<ul>
<li><a href="#select">SELECT</a></li>
<li><a href="#%E8%BF%9E%E6%8E%A5">连接</a></li>
<li><a href="#information_schematables">information_schema.tables</a></li>
<li><a href="#show%E8%AF%AD%E5%8F%A5">show语句</a></li>
<li><a href="#%E6%97%A5%E6%9C%9F%E6%88%96%E6%97%B6%E9%97%B4%E6%A0%BC%E5%BC%8F%E5%8C%96">日期或时间格式化</a></li>
<li><a href="#%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8Fregexp">正则表达式（regexp）</a></li>
<li><a href="#%E5%AE%9E%E7%8E%B0%E5%88%86%E7%BB%84%E6%8E%92%E5%BA%8F%E7%B1%BB%E4%BC%BC%E5%BC%80%E7%AA%97%E5%87%BD%E6%95%B0">实现分组排序，类似开窗函数</a></li>
</ul>
</li>
<li><a href="#%E7%B4%A2%E5%BC%95">索引</a>
<ul>
<li><a href="#%E5%88%9B%E5%BB%BA%E7%B4%A2%E5%BC%95">创建索引</a></li>
<li><a href="#%E5%88%A0%E9%99%A4%E7%B4%A2%E5%BC%95">删除索引</a></li>
<li><a href="#%E6%9F%A5%E7%9C%8B%E8%A1%A8%E7%9A%84%E7%B4%A2%E5%BC%95">查看表的索引</a></li>
</ul>
</li>
<li><a href="#%E6%89%A7%E8%A1%8C%E8%AE%A1%E5%88%92%E7%AE%A1%E7%90%86%E5%9F%BA%E7%A1%80%E4%BC%98%E5%8C%96">执行计划管理（基础优化）</a>
<ul>
<li><a href="#%E8%8E%B7%E5%8F%96%E6%89%A7%E8%A1%8C%E8%AE%A1%E5%88%92">获取执行计划</a></li>
</ul>
</li>
<li><a href="#%E8%BF%87%E7%A8%8B%E4%BD%9C%E4%B8%9A%E5%92%8C%E8%A7%A6%E5%8F%91%E5%99%A8">过程，作业和触发器</a></li>
</ul>
</li>
</ul>
<h2 id="%E6%9C%8D%E5%8A%A1">服务</h2>
<h3 id="%E6%9F%A5%E7%9C%8B%E6%9C%8D%E5%8A%A1%E5%B1%9E%E6%80%A7">查看服务属性</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># 查看所有属性（参数）</span>
<span class="hljs-keyword">show</span> <span class="hljs-keyword">variables</span>;
<span class="hljs-comment"># 查看表名大小写是否敏感配置</span>
<span class="hljs-keyword">show</span> <span class="hljs-keyword">variables</span> <span class="hljs-keyword">like</span> <span class="hljs-string">'%lower_case_table_names%'</span>;
</div></code></pre>
<blockquote>
<p><strong>lower_case_table_names</strong>
表名大小写是否敏感
取值有三个，分别是0、1、2
Linux、Windows、Mac OS中默认值分别是 0 1 2
0：表名按你写的SQL大小写存储，大写就大写小写就小写，比较时大小写敏感。
1：表名转小写后存储到硬盘，比较时大小写不敏感。
2：表名按你写的SQL大小写存储，大写就大写小写就小写，比较时统一转小写比较。</p>
</blockquote>
<h3 id="%E5%AD%97%E7%AC%A6%E9%9B%86%E5%92%8C%E5%AD%97%E7%AC%A6%E5%BA%8F">字符集和字符序</h3>
<ul>
<li>
<p>查看支持的字符集</p>
<pre class="hljs"><code><div><span class="hljs-keyword">SHOW</span> <span class="hljs-built_in">CHARACTER</span> <span class="hljs-keyword">SET</span>;
<span class="hljs-comment"># 还可以加上限制条件 where 或 like</span>
<span class="hljs-keyword">SHOW</span> <span class="hljs-built_in">CHARACTER</span> <span class="hljs-keyword">SET</span> <span class="hljs-keyword">WHERE</span> <span class="hljs-keyword">Charset</span>=<span class="hljs-string">"utf8"</span>;
<span class="hljs-keyword">SHOW</span> <span class="hljs-built_in">CHARACTER</span> <span class="hljs-keyword">SET</span> <span class="hljs-keyword">LIKE</span> <span class="hljs-string">"utf8%"</span>;
<span class="hljs-comment"># 或者</span>
<span class="hljs-keyword">use</span> information_schema;
<span class="hljs-keyword">select</span> * <span class="hljs-keyword">from</span> CHARACTER_SETS;
</div></code></pre>
</li>
<li>
<p>查看支持的字符序</p>
<pre class="hljs"><code><div><span class="hljs-comment"># 通过Default的值是否为Yes，判断是否默认的字符序</span>
<span class="hljs-keyword">SHOW</span> <span class="hljs-keyword">COLLATION</span>;
<span class="hljs-comment"># 或者</span>
<span class="hljs-keyword">USE</span> information_schema;
<span class="hljs-keyword">SELECT</span> * <span class="hljs-keyword">FROM</span> COLLATIONS <span class="hljs-keyword">WHERE</span> CHARACTER_SET_NAME=<span class="hljs-string">"utf8"</span>;
</div></code></pre>
</li>
<li>
<p>查看字符集和字符序</p>
<pre class="hljs"><code><div><span class="hljs-comment"># 查看 字符集</span>
<span class="hljs-keyword">show</span> <span class="hljs-keyword">variables</span> <span class="hljs-keyword">like</span> <span class="hljs-string">'character_set_server%'</span>;
<span class="hljs-comment"># 查看 字符序</span>
<span class="hljs-keyword">show</span> <span class="hljs-keyword">variables</span> <span class="hljs-keyword">like</span> <span class="hljs-string">'collation_server%'</span>;
<span class="hljs-comment"># 查看数据库的字符集字符序</span>
<span class="hljs-keyword">use</span> 库名;
<span class="hljs-keyword">SELECT</span> @@character_set_database, @@collation_database;
<span class="hljs-comment"># 也可以通过系统表来查看字符集字符序</span>
<span class="hljs-keyword">SELECT</span> SCHEMA_NAME, DEFAULT_CHARACTER_SET_NAME, DEFAULT_COLLATION_NAME  <span class="hljs-keyword">FROM</span> information_schema.SCHEMATA <span class="hljs-keyword">WHERE</span> schema_name=<span class="hljs-string">"库名"</span>;
<span class="hljs-comment"># 还可以通过查看建库语句来查看</span>
</div></code></pre>
</li>
</ul>
<blockquote>
<p><strong>字符集、字符序的概念与联系</strong><br>
在数据的存储上，MySQL提供了不同的字符集支持。而在数据的对比操作上，则提供了不同的字符序支持。<br>
MySQL提供了不同级别的设置，包括server级、database级、table级、column级，可以提供非常精准的设置。<br>
<strong>什么是字符集、字符序？简单的来说：</strong><br>
<em>1.字符集（character set/charset）：定义了字符以及字符的编码。</em><br>
<em>2.字符序（collation）：也叫排序规则或者校对规则，定义了字符的比较规则。</em><br>
<strong>MySQL支持多种字符集 与 字符序：</strong><br>
<em>1.一个字符集对应至少一种字符序（一般是1对多）。</em><br>
<em>2.两个不同的字符集不能有相同的字符序。</em><br>
<em>3.每个字符集都有默认的字符序。</em></p>
</blockquote>
<p>具体的情况见：<a href="https://www.cnblogs.com/chyingp/p/mysql-character-set-collation.html" title="再见乱码">MySQL的字符集设置</a></p>
<h2 id="%E5%BA%93">库</h2>
<ul>
<li>
<p>查看所有的库名</p>
<pre class="hljs"><code><div><span class="hljs-keyword">SHOW</span> <span class="hljs-keyword">DATABASES</span>;
</div></code></pre>
<p>或者使用系统表，除库名外还能得到数据库配置信息</p>
<pre class="hljs"><code><div><span class="hljs-keyword">SELECT</span>
    <span class="hljs-keyword">lower</span>(schema_name) schema_name
<span class="hljs-keyword">FROM</span>
    information_schema.schemata
<span class="hljs-keyword">WHERE</span>
    schema_name <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">IN</span> (
        <span class="hljs-string">'mysql'</span>,
        <span class="hljs-string">'information_schema'</span>,
        <span class="hljs-string">'test'</span>,
        <span class="hljs-string">'search'</span>,
        <span class="hljs-string">'tbsearch'</span>,
        <span class="hljs-string">'sbtest'</span>,
        <span class="hljs-string">'dev_ddl'</span>
    );
</div></code></pre>
</li>
<li>
<p>查看建库语句</p>
<pre class="hljs"><code><div><span class="hljs-keyword">SHOW</span> <span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">DATABASE</span> 数据库名;
</div></code></pre>
</li>
<li>
<p>创建、修改和删除</p>
<pre class="hljs"><code><div><span class="hljs-comment">-- 按照默认的字符集和排序规则创建数据库</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">DATABASE</span> 库名;
<span class="hljs-comment">-- 指定字符集和排序规则（也可以使用charset，也可以不用引号）</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">DATABASE</span> 库名 <span class="hljs-built_in">CHARACTER</span> <span class="hljs-keyword">SET</span> <span class="hljs-string">'utf8mb4'</span> <span class="hljs-keyword">COLLATE</span> <span class="hljs-string">'utf8mb4_unicode_ci'</span>;
<span class="hljs-comment">-- 创建数据库时如果已存在会报错，避免报错可以先判断是否存在</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">DATABASE</span> <span class="hljs-keyword">IF</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> 库名;
<span class="hljs-comment">-- 修改数据库的字符集、字符序（也可以使用charset）</span>
<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">DATABASE</span> db_name [[<span class="hljs-keyword">DEFAULT</span>] <span class="hljs-built_in">CHARACTER</span> <span class="hljs-keyword">SET</span> charset_name] [[<span class="hljs-keyword">DEFAULT</span>] <span class="hljs-keyword">COLLATE</span> collation_name];
<span class="hljs-comment">-- 删除库</span>
<span class="hljs-keyword">DROP</span> <span class="hljs-keyword">DATABASE</span> 库名;
</div></code></pre>
</li>
<li>
<p>查看数据库中的所有表的信息</p>
<pre class="hljs"><code><div><span class="hljs-keyword">SELECT</span>
    table_name,
    create_time updated_at,
    table_type,
    <span class="hljs-keyword">ENGINE</span>,
    table_rows num_rows,
    table_comment,
    <span class="hljs-keyword">ceil</span>(data_length / <span class="hljs-number">1024</span> / <span class="hljs-number">1024</span>) store_capacity
<span class="hljs-keyword">FROM</span>
    information_schema.TABLES
<span class="hljs-keyword">WHERE</span>
    table_schema = <span class="hljs-string">'库名'</span> <span class="hljs-keyword">AND</span> table_name <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">LIKE</span> <span class="hljs-string">'tmp#_%'</span> ESCAPE <span class="hljs-string">'#'</span>;
</div></code></pre>
</li>
<li>
<p>查询库中所有 innodb 引擎的表</p>
<pre class="hljs"><code><div><span class="hljs-keyword">SELECT</span>
    table_name,
    table_type,
    <span class="hljs-keyword">engine</span>,
    table_rows num_rows,
    table_comment
<span class="hljs-keyword">FROM</span>
    information_schema.TABLES
<span class="hljs-keyword">WHERE</span>
    table_schema = <span class="hljs-string">'库名'</span> <span class="hljs-keyword">AND</span> <span class="hljs-keyword">engine</span> = <span class="hljs-string">'innodb'</span>;
</div></code></pre>
</li>
<li>
<p>判断库中是否存在包含<code>status</code>的表</p>
<pre class="hljs"><code><div><span class="hljs-keyword">SELECT</span> table_name <span class="hljs-keyword">FROM</span> information_schema.TABLES <span class="hljs-keyword">WHERE</span> table_name <span class="hljs-keyword">LIKE</span> <span class="hljs-string">'%status%'</span>;
</div></code></pre>
</li>
<li>
<p>查看库表</p>
<pre class="hljs"><code><div><span class="hljs-keyword">show</span> <span class="hljs-keyword">databases</span>;
<span class="hljs-keyword">show</span> <span class="hljs-keyword">tables</span> [<span class="hljs-keyword">from</span> <span class="hljs-keyword">database</span>];
</div></code></pre>
</li>
</ul>
<h2 id="%E8%A1%A8%E5%AE%9A%E4%B9%89">表定义</h2>
<h3 id="%E5%A2%9E">增</h3>
<ul>
<li>
<p>一般建表格式</p>
<pre class="hljs"><code><div><span class="hljs-keyword">CREATE</span> [<span class="hljs-keyword">TEMPORARY</span>] <span class="hljs-keyword">TABLE</span> [<span class="hljs-keyword">IF</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span>] tbl_name
    (create_definition,...)


create_definition: {
    col_name column_definition
  | {<span class="hljs-keyword">INDEX</span> | <span class="hljs-keyword">KEY</span>} [index_name] [index_type] (key_part,...)
      [index_option] ...
  | {FULLTEXT | SPATIAL} [<span class="hljs-keyword">INDEX</span> | <span class="hljs-keyword">KEY</span>] [index_name] (key_part,...)
      [index_option] ...
  | [<span class="hljs-keyword">CONSTRAINT</span> [symbol]] PRIMARY <span class="hljs-keyword">KEY</span>
      [index_type] (key_part,...)
      [index_option] ...
  | [<span class="hljs-keyword">CONSTRAINT</span> [symbol]] <span class="hljs-keyword">UNIQUE</span> [<span class="hljs-keyword">INDEX</span> | <span class="hljs-keyword">KEY</span>]
      [index_name] [index_type] (key_part,...)
      [index_option] ...
  | [<span class="hljs-keyword">CONSTRAINT</span> [symbol]] <span class="hljs-keyword">FOREIGN</span> <span class="hljs-keyword">KEY</span>
      [index_name] (col_name,...)
      reference_definition
  | <span class="hljs-keyword">CHECK</span> (expr)
}

column_definition: {
    data_type [<span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> | <span class="hljs-literal">NULL</span>] [<span class="hljs-keyword">DEFAULT</span> default_value]
      [AUTO_INCREMENT] [<span class="hljs-keyword">UNIQUE</span> [<span class="hljs-keyword">KEY</span>]] [[PRIMARY] <span class="hljs-keyword">KEY</span>]
      [<span class="hljs-keyword">COMMENT</span> <span class="hljs-string">'string'</span>]
      [<span class="hljs-keyword">COLLATE</span> collation_name]
      [COLUMN_FORMAT {<span class="hljs-keyword">FIXED</span> | DYNAMIC | <span class="hljs-keyword">DEFAULT</span>}]
      [<span class="hljs-keyword">STORAGE</span> {DISK | <span class="hljs-keyword">MEMORY</span>}]
      [reference_definition]
  | data_type
      [<span class="hljs-keyword">COLLATE</span> collation_name]
      [<span class="hljs-keyword">GENERATED</span> <span class="hljs-keyword">ALWAYS</span>] <span class="hljs-keyword">AS</span> (expr)
      [<span class="hljs-keyword">VIRTUAL</span> | <span class="hljs-keyword">STORED</span>] [<span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> | <span class="hljs-literal">NULL</span>]
      [<span class="hljs-keyword">UNIQUE</span> [<span class="hljs-keyword">KEY</span>]] [[PRIMARY] <span class="hljs-keyword">KEY</span>]
      [<span class="hljs-keyword">COMMENT</span> <span class="hljs-string">'string'</span>]
      [reference_definition]
}

data_type:
    (see Chapter <span class="hljs-number">11</span>, <span class="hljs-keyword">Data</span> Types)

<span class="hljs-comment"># 可省略</span>
key_part:
    col_name [(<span class="hljs-keyword">length</span>)] [<span class="hljs-keyword">ASC</span> | <span class="hljs-keyword">DESC</span>]

<span class="hljs-comment"># 可省略</span>
index_type:
    <span class="hljs-keyword">USING</span> {BTREE | <span class="hljs-keyword">HASH</span>}

<span class="hljs-comment"># 可省略</span>
index_option: {
    KEY_BLOCK_SIZE [=] <span class="hljs-keyword">value</span>
  | index_type
  | <span class="hljs-keyword">WITH</span> PARSER parser_name
  | <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">'string'</span>
}

<span class="hljs-comment"># 外键配置，一般用不到</span>
reference_definition:
    <span class="hljs-keyword">REFERENCES</span> tbl_name (key_part,...)
      [<span class="hljs-keyword">MATCH</span> <span class="hljs-keyword">FULL</span> | <span class="hljs-keyword">MATCH</span> <span class="hljs-keyword">PARTIAL</span> | <span class="hljs-keyword">MATCH</span> SIMPLE]
      [<span class="hljs-keyword">ON</span> <span class="hljs-keyword">DELETE</span> reference_option]
      [<span class="hljs-keyword">ON</span> <span class="hljs-keyword">UPDATE</span> reference_option]

<span class="hljs-comment"># 外键配置，可省略</span>
reference_option:
    RESTRICT | <span class="hljs-keyword">CASCADE</span> | <span class="hljs-keyword">SET</span> <span class="hljs-literal">NULL</span> | <span class="hljs-keyword">NO</span> <span class="hljs-keyword">ACTION</span> | <span class="hljs-keyword">SET</span> <span class="hljs-keyword">DEFAULT</span>

</div></code></pre>
<blockquote>
<p>详细信息参照官方文档：<a href="https://dev.mysql.com/doc/refman/5.7/en/create-table.html">https://dev.mysql.com/doc/refman/5.7/en/create-table.html</a>
另外，还可以使用 create table tbl_name like o_tbl_name 来复制表结构，还可以使用 as select 建表；</p>
</blockquote>
</li>
<li>
<p>新建表以及添加表和字段的注释（还可以指定引擎、字符集等，字符集也可以使用charset）</p>
<pre class="hljs"><code><div><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> tbl_name(
    <span class="hljs-keyword">ID</span> <span class="hljs-built_in">INT</span>(<span class="hljs-number">11</span>) primary <span class="hljs-keyword">key</span> auto_increment  <span class="hljs-keyword">comment</span> <span class="hljs-string">'主键'</span>,
    <span class="hljs-keyword">NAME</span> <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">comment</span> <span class="hljs-string">'姓名'</span>,
    CREATE_TIME datetime <span class="hljs-keyword">comment</span> <span class="hljs-string">'创建时间'</span>
)<span class="hljs-keyword">comment</span>  = <span class="hljs-string">'用户信息表'</span>
[<span class="hljs-keyword">engine</span>=<span class="hljs-keyword">innodb</span>]
[[<span class="hljs-keyword">DEFAULT</span>] <span class="hljs-built_in">CHARACTER</span> <span class="hljs-keyword">SET</span> charset_name]
[<span class="hljs-keyword">COLLATE</span> collation_name]];
</div></code></pre>
<p>建议建表模板示例</p>
<pre class="hljs"><code><div><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> tbl_name(
<span class="hljs-keyword">id</span> <span class="hljs-built_in">int</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">null</span> primary <span class="hljs-keyword">key</span> AUTO_INCREMENT <span class="hljs-keyword">comment</span> <span class="hljs-string">'编号'</span>,
<span class="hljs-keyword">name</span> <span class="hljs-built_in">varchar</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">not</span> <span class="hljs-literal">null</span> <span class="hljs-keyword">comment</span> <span class="hljs-string">'姓名'</span>,
age <span class="hljs-built_in">tinyint</span> <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">null</span> <span class="hljs-keyword">default</span> <span class="hljs-number">0</span> <span class="hljs-keyword">comment</span> <span class="hljs-string">'年龄'</span>,
gender enum(<span class="hljs-string">'m'</span>,<span class="hljs-string">'f'</span>,<span class="hljs-string">'n'</span>) <span class="hljs-keyword">not</span> <span class="hljs-literal">null</span> <span class="hljs-keyword">default</span> <span class="hljs-string">'n'</span> <span class="hljs-keyword">comment</span> <span class="hljs-string">'性别'</span>,
create_time datetime <span class="hljs-keyword">not</span> <span class="hljs-literal">null</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">now</span>() <span class="hljs-keyword">comment</span> <span class="hljs-string">'创建时间'</span>
) <span class="hljs-keyword">charset</span>=utf8mb4 <span class="hljs-keyword">engine</span>=<span class="hljs-keyword">innodb</span>;
</div></code></pre>
</li>
<li>
<p>增加字段（列）</p>
<pre class="hljs"><code><div><span class="hljs-comment"># 以手机号为例</span>
<span class="hljs-keyword">alter</span> <span class="hljs-keyword">table</span> tbl_name <span class="hljs-keyword">add</span> column_name <span class="hljs-built_in">char</span>(<span class="hljs-number">11</span>) <span class="hljs-keyword">not</span> <span class="hljs-literal">null</span> <span class="hljs-keyword">unique</span> <span class="hljs-keyword">comment</span> <span class="hljs-string">'手机号'</span>;
<span class="hljs-comment"># 添加一个状态列</span>
<span class="hljs-keyword">alter</span> <span class="hljs-keyword">table</span> tbl_name <span class="hljs-keyword">add</span> state <span class="hljs-built_in">tinyint</span> <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">null</span> <span class="hljs-keyword">default</span> <span class="hljs-number">1</span> <span class="hljs-keyword">comment</span> <span class="hljs-string">'状态'</span>;
<span class="hljs-comment"># 指定加入列的位置可使用 after col_name 命令,例如在 name 后添加 qq列</span>
<span class="hljs-keyword">alter</span> <span class="hljs-keyword">table</span> tbl_name <span class="hljs-keyword">add</span> qq <span class="hljs-built_in">varchar</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">not</span> <span class="hljs-literal">null</span> <span class="hljs-keyword">unique</span> <span class="hljs-keyword">comment</span> <span class="hljs-string">'qq'</span> <span class="hljs-keyword">after</span> <span class="hljs-keyword">name</span>;
<span class="hljs-comment"># 指定加入列在首列可使用 first 命令，例如在首列上添加 学号列：sid</span>
ater table tbl_name add sid varchar(255) not null unique <span class="hljs-keyword">comment</span> <span class="hljs-string">'学号'</span> <span class="hljs-keyword">first</span>;
</div></code></pre>
</li>
</ul>
<h3 id="%E5%88%A0%E5%92%8C%E6%94%B9">删和改</h3>
<ul>
<li>
<p>删表</p>
<pre class="hljs"><code><div><span class="hljs-keyword">drop</span> <span class="hljs-keyword">table</span> tbl_name;
</div></code></pre>
</li>
<li>
<p>删列（字段）</p>
<pre class="hljs"><code><div><span class="hljs-keyword">alter</span> <span class="hljs-keyword">table</span> tbl_name <span class="hljs-keyword">drop</span> column_name;
</div></code></pre>
</li>
<li>
<p>修改表的字符集、字符序</p>
<pre class="hljs"><code><div><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> tbl_name [[<span class="hljs-keyword">DEFAULT</span>] <span class="hljs-built_in">CHARACTER</span> <span class="hljs-keyword">SET</span> charset_name] [<span class="hljs-keyword">COLLATE</span> collation_name];
</div></code></pre>
</li>
<li>
<p>修改字段类型、注释等</p>
<pre class="hljs"><code><div><span class="hljs-keyword">alter</span> <span class="hljs-keyword">table</span> tbl_name <span class="hljs-keyword">modify</span> <span class="hljs-keyword">column</span> column_name <span class="hljs-built_in">varchar</span>(<span class="hljs-number">30</span>) <span class="hljs-keyword">comment</span> <span class="hljs-string">"注释"</span>;
</div></code></pre>
</li>
<li>
<p>既修改字段名也修改字段类型等</p>
<pre class="hljs"><code><div><span class="hljs-comment"># 例如</span>
<span class="hljs-keyword">alter</span> <span class="hljs-keyword">table</span> tbl_name <span class="hljs-keyword">change</span> old_col_name new_col_name <span class="hljs-built_in">char</span>(<span class="hljs-number">1</span>) <span class="hljs-keyword">not</span> <span class="hljs-literal">null</span> <span class="hljs-keyword">default</span> <span class="hljs-string">'n'</span>;
</div></code></pre>
</li>
</ul>
<h3 id="%E6%9F%A5">查</h3>
<ul>
<li>
<p>查看表结构<br>
查看表的字段、字段类型、索引等</p>
<pre class="hljs"><code><div>DESC tbl_name;
<span class="hljs-keyword">SHOW</span> <span class="hljs-keyword">COLUMNS</span> <span class="hljs-keyword">FROM</span> tbl_name;
<span class="hljs-comment"># 包含字符集、字段注释等</span>
<span class="hljs-keyword">SHOW</span> <span class="hljs-keyword">FULL</span> <span class="hljs-keyword">FIELDS</span> <span class="hljs-keyword">FROM</span> tbl_name;
</div></code></pre>
</li>
<li>
<p>查看数据库下某(些)表的字段信息</p>
<pre class="hljs"><code><div><span class="hljs-keyword">SELECT</span>
    <span class="hljs-keyword">lower</span>(column_name) column_name,
    ordinal_position <span class="hljs-keyword">position</span>,
    column_default dafault_value,
    <span class="hljs-keyword">substring</span>(is_nullable, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>) nullable,
    column_type data_type,
    column_comment,
    character_maximum_length data_length,
    numeric_precision data_precision,
    numeric_scale data_scale
<span class="hljs-keyword">FROM</span>
    information_schema.COLUMNS
<span class="hljs-keyword">WHERE</span>
    table_schema = <span class="hljs-string">'employees'</span> <span class="hljs-keyword">AND</span> table_name = <span class="hljs-string">'employees'</span>;
</div></code></pre>
</li>
<li>
<p>查看建表语句</p>
<blockquote>
<p>注意表名不加单引号</p>
</blockquote>
<pre class="hljs"><code><div><span class="hljs-keyword">show</span> <span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> 表名;
</div></code></pre>
</li>
<li>
<p>查看分区表的分区情况</p>
<pre class="hljs"><code><div><span class="hljs-keyword">SELECT</span>
    partition_name part,
    partition_expression expr,
    partition_description <span class="hljs-keyword">descr</span>,
    table_rows
<span class="hljs-keyword">FROM</span>
    information_schema.PARTITIONS
<span class="hljs-keyword">WHERE</span>
    table_schema = <span class="hljs-keyword">SCHEMA</span>()
<span class="hljs-keyword">AND</span> table_name = <span class="hljs-string">'table_name'</span>;
</div></code></pre>
<blockquote>
<p>分区操作参考：<a href="http://blog.csdn.net/youzhouliu/article/details/52757043">http://blog.csdn.net/youzhouliu/article/details/52757043</a></p>
</blockquote>
</li>
</ul>
<h2 id="%E6%B3%A8%E9%87%8A">注释</h2>
<ul>
<li>
<p>修改表/字段的注释</p>
<pre class="hljs"><code><div><span class="hljs-keyword">alter</span> <span class="hljs-keyword">table</span> t_user <span class="hljs-keyword">comment</span>  = <span class="hljs-string">'修改后的表注释信息(用户信息表)'</span>;
</div></code></pre>
</li>
<li>
<p>修改字段注释</p>
<pre class="hljs"><code><div><span class="hljs-keyword">alter</span> <span class="hljs-keyword">table</span> t_user <span class="hljs-keyword">modify</span> <span class="hljs-keyword">column</span> <span class="hljs-keyword">id</span> <span class="hljs-built_in">int</span> <span class="hljs-keyword">comment</span> <span class="hljs-string">'主键ID'</span>;
</div></code></pre>
</li>
<li>
<p>查看所有表的注释</p>
<pre class="hljs"><code><div><span class="hljs-keyword">SELECT</span> table_name 表名, table_comment 表说明
<span class="hljs-keyword">FROM</span> information_schema.TABLES
<span class="hljs-keyword">WHERE</span> table_schema = <span class="hljs-string">'数据库名'</span>
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> table_name;
</div></code></pre>
</li>
<li>
<p>查询所有表及字段的注释</p>
<pre class="hljs"><code><div><span class="hljs-keyword">SELECT</span>
    a.table_name 表名,
    a.table_comment 表说明,
    b.COLUMN_NAME 字段名,
    b.column_comment 字段说明,
    b.column_type 字段类型,
    b.column_key 约束
<span class="hljs-keyword">FROM</span> information_schema.TABLES a
<span class="hljs-keyword">LEFT</span> <span class="hljs-keyword">JOIN</span> information_schema. <span class="hljs-keyword">COLUMNS</span> b <span class="hljs-keyword">ON</span> a.table_name = b.TABLE_NAME
<span class="hljs-keyword">WHERE</span> a.table_schema = <span class="hljs-string">'数据库名'</span>
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> a.table_name;
</div></code></pre>
</li>
<li>
<p>查询某表的所有字段的注释</p>
<pre class="hljs"><code><div><span class="hljs-keyword">select</span>
    COLUMN_NAME 字段名,
    column_comment 字段说明,
    column_type 字段类型,
    column_key 约束
<span class="hljs-keyword">from</span> information_schema.columns
<span class="hljs-keyword">where</span> table_schema = <span class="hljs-string">'数据库名'</span> <span class="hljs-keyword">and</span> table_name = <span class="hljs-string">'表名'</span>;
<span class="hljs-comment"># 或者</span>
<span class="hljs-keyword">show</span> <span class="hljs-keyword">full</span> <span class="hljs-keyword">columns</span> <span class="hljs-keyword">from</span> 表名;
</div></code></pre>
</li>
</ul>
<h2 id="dml">DML</h2>
<h3 id="insert">INSERT</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># 简单写法，省略字段，值需要与列定义一一对应</span>
<span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> tbl_name <span class="hljs-keyword">values</span>(xx,xx...);
<span class="hljs-comment"># 规范写法，指定录入字段，值与列一一对应</span>
<span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> tbl_name(col1,col2...) <span class="hljs-keyword">values</span> (xx,xx...);
<span class="hljs-comment"># 插入多行</span>
<span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> tbl_name(col1,col2...) <span class="hljs-keyword">values</span> (xx,xx...),(xx,xx...),(xx,xx...);
</div></code></pre>
<h3 id="update">UPDATE</h3>
<blockquote>
<p>谨慎在数据库中做 update 操作</p>
</blockquote>
<pre class="hljs"><code><div><span class="hljs-comment"># 标准格式 update set where</span>
<span class="hljs-keyword">update</span> tbl_name <span class="hljs-keyword">set</span> col_name = <span class="hljs-string">'xxx'</span> <span class="hljs-keyword">where</span> <span class="hljs-keyword">id</span> = x;
</div></code></pre>
<h3 id="delete">DELETE</h3>
<blockquote>
<p>谨慎在数据库中做 delete 操作</p>
</blockquote>
<pre class="hljs"><code><div><span class="hljs-comment"># 删除表中所有数据</span>
<span class="hljs-keyword">delete</span> <span class="hljs-keyword">from</span> tbl_name;
<span class="hljs-comment"># 删除指定行数据</span>
<span class="hljs-keyword">delete</span> <span class="hljs-keyword">from</span> tbl_name <span class="hljs-keyword">where</span> <span class="hljs-keyword">id</span> = x;
<span class="hljs-comment"># 清空表数据（物理删除，效率更高）</span>
<span class="hljs-keyword">truncate</span> <span class="hljs-keyword">table</span> tbl_name;
</div></code></pre>
<blockquote>
<p>delete 与 truncate 的区别：
delete 是逻辑逐行删除，不会降低自增长的起始值，效率很低，产生很多磁盘碎片，会影响性能；
truncate 是物理删除，将表段中的区页进行清空，不会产生碎片，效率较高。</p>
</blockquote>
<h2 id="dql">DQL</h2>
<blockquote>
<p>官方文档中没有DQL，属于DML，这里单独列出来。</p>
</blockquote>
<h3 id="select">SELECT</h3>
<ul>
<li>
<p>单独使用select</p>
<ul>
<li>
<p>select @@xxxx;
获取参数信息。</p>
<pre class="hljs"><code><div><span class="hljs-comment"># 获取端口号</span>
<span class="hljs-keyword">select</span> @@port;
<span class="hljs-comment">-- 查看默认的引擎</span>
<span class="hljs-keyword">select</span> @@default_storage_engine;
<span class="hljs-comment"># 参数名记忆不准确的话，可以使用模糊匹配</span>
<span class="hljs-keyword">show</span> <span class="hljs-keyword">variables</span> <span class="hljs-keyword">like</span> <span class="hljs-string">'%xx%'</span>;
</div></code></pre>
</li>
<li>
<p>select 函数();</p>
<pre class="hljs"><code><div><span class="hljs-comment"># 常用的</span>
<span class="hljs-comment"># 查看当前数据库</span>
<span class="hljs-keyword">select</span> <span class="hljs-keyword">database</span>();
<span class="hljs-comment"># 查看当前时间</span>
<span class="hljs-keyword">select</span> <span class="hljs-keyword">database</span>();
<span class="hljs-comment"># 查看当前版本</span>
<span class="hljs-keyword">select</span> <span class="hljs-keyword">version</span>();
</div></code></pre>
</li>
</ul>
</li>
<li>
<p>SQL92标准的使用语法</p>
<ul>
<li>
<p>MySQL的world示例库
加载官方提供的示例数据库：<a href="https://dev.mysql.com/doc/index-other.html">https://dev.mysql.com/doc/index-other.html</a>
以下使用示例都用该库的表进行示范，表结构如下：</p>
<pre class="hljs"><code><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-string">`city`</span> (
  <span class="hljs-string">`ID`</span> <span class="hljs-built_in">int</span> <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> AUTO_INCREMENT,
  <span class="hljs-string">`Name`</span> <span class="hljs-built_in">char</span>(<span class="hljs-number">35</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">''</span>,
  <span class="hljs-string">`CountryCode`</span> <span class="hljs-built_in">char</span>(<span class="hljs-number">3</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">''</span>,
  <span class="hljs-string">`District`</span> <span class="hljs-built_in">char</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">''</span>,
  <span class="hljs-string">`Population`</span> <span class="hljs-built_in">int</span> <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">'0'</span>,
  PRIMARY <span class="hljs-keyword">KEY</span> (<span class="hljs-string">`ID`</span>),
  <span class="hljs-keyword">KEY</span> <span class="hljs-string">`CountryCode`</span> (<span class="hljs-string">`CountryCode`</span>),
  <span class="hljs-keyword">CONSTRAINT</span> <span class="hljs-string">`city_ibfk_1`</span> <span class="hljs-keyword">FOREIGN</span> <span class="hljs-keyword">KEY</span> (<span class="hljs-string">`CountryCode`</span>) <span class="hljs-keyword">REFERENCES</span> <span class="hljs-string">`country`</span> (<span class="hljs-string">`Code`</span>)
) <span class="hljs-keyword">ENGINE</span>=<span class="hljs-keyword">InnoDB</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">CHARSET</span>=utf8mb4;

<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-string">`country`</span> (
  <span class="hljs-string">`Code`</span> <span class="hljs-built_in">char</span>(<span class="hljs-number">3</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">''</span>,
  <span class="hljs-string">`Name`</span> <span class="hljs-built_in">char</span>(<span class="hljs-number">52</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">''</span>,
  <span class="hljs-string">`Continent`</span> enum(<span class="hljs-string">'Asia'</span>,<span class="hljs-string">'Europe'</span>,<span class="hljs-string">'North America'</span>,<span class="hljs-string">'Africa'</span>,<span class="hljs-string">'Oceania'</span>,<span class="hljs-string">'Antarctica'</span>,<span class="hljs-string">'South America'</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">'Asia'</span>,
  <span class="hljs-string">`Region`</span> <span class="hljs-built_in">char</span>(<span class="hljs-number">26</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">''</span>,
  <span class="hljs-string">`SurfaceArea`</span> <span class="hljs-built_in">decimal</span>(<span class="hljs-number">10</span>,<span class="hljs-number">2</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">'0.00'</span>,
  <span class="hljs-string">`IndepYear`</span> <span class="hljs-built_in">smallint</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-literal">NULL</span>,
  <span class="hljs-string">`Population`</span> <span class="hljs-built_in">int</span> <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">'0'</span>,
  <span class="hljs-string">`LifeExpectancy`</span> <span class="hljs-built_in">decimal</span>(<span class="hljs-number">3</span>,<span class="hljs-number">1</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-literal">NULL</span>,
  <span class="hljs-string">`GNP`</span> <span class="hljs-built_in">decimal</span>(<span class="hljs-number">10</span>,<span class="hljs-number">2</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-literal">NULL</span>,
  <span class="hljs-string">`GNPOld`</span> <span class="hljs-built_in">decimal</span>(<span class="hljs-number">10</span>,<span class="hljs-number">2</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-literal">NULL</span>,
  <span class="hljs-string">`LocalName`</span> <span class="hljs-built_in">char</span>(<span class="hljs-number">45</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">''</span>,
  <span class="hljs-string">`GovernmentForm`</span> <span class="hljs-built_in">char</span>(<span class="hljs-number">45</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">''</span>,
  <span class="hljs-string">`HeadOfState`</span> <span class="hljs-built_in">char</span>(<span class="hljs-number">60</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-literal">NULL</span>,
  <span class="hljs-string">`Capital`</span> <span class="hljs-built_in">int</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-literal">NULL</span>,
  <span class="hljs-string">`Code2`</span> <span class="hljs-built_in">char</span>(<span class="hljs-number">2</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">''</span>,
  PRIMARY <span class="hljs-keyword">KEY</span> (<span class="hljs-string">`Code`</span>)
) <span class="hljs-keyword">ENGINE</span>=<span class="hljs-keyword">InnoDB</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">CHARSET</span>=utf8mb4;

<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-string">`countrylanguage`</span> (
  <span class="hljs-string">`CountryCode`</span> <span class="hljs-built_in">char</span>(<span class="hljs-number">3</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">''</span>,
  <span class="hljs-string">`Language`</span> <span class="hljs-built_in">char</span>(<span class="hljs-number">30</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">''</span>,
  <span class="hljs-string">`IsOfficial`</span> enum(<span class="hljs-string">'T'</span>,<span class="hljs-string">'F'</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">'F'</span>,
  <span class="hljs-string">`Percentage`</span> <span class="hljs-built_in">decimal</span>(<span class="hljs-number">4</span>,<span class="hljs-number">1</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">'0.0'</span>,
  PRIMARY <span class="hljs-keyword">KEY</span> (<span class="hljs-string">`CountryCode`</span>,<span class="hljs-string">`Language`</span>),
  <span class="hljs-keyword">KEY</span> <span class="hljs-string">`CountryCode`</span> (<span class="hljs-string">`CountryCode`</span>),
  <span class="hljs-keyword">CONSTRAINT</span> <span class="hljs-string">`countryLanguage_ibfk_1`</span> <span class="hljs-keyword">FOREIGN</span> <span class="hljs-keyword">KEY</span> (<span class="hljs-string">`CountryCode`</span>) <span class="hljs-keyword">REFERENCES</span> <span class="hljs-string">`country`</span> (<span class="hljs-string">`Code`</span>)
) <span class="hljs-keyword">ENGINE</span>=<span class="hljs-keyword">InnoDB</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">CHARSET</span>=utf8mb4;
</div></code></pre>
</li>
<li>
<p>select语法执行顺序（单表）
select 开始 -&gt; from子句 -&gt; where子句 -&gt; group by子句 -&gt; select后的执行条件（列显示）-&gt; having子句 --&gt; order by -&gt; limit</p>
</li>
<li>
<p>from 【必选】</p>
<pre class="hljs"><code><div><span class="hljs-comment"># 简单用法</span>
<span class="hljs-comment"># 适合表数据行较少的，生产中慎用</span>
<span class="hljs-keyword">use</span> <span class="hljs-keyword">database</span>;
<span class="hljs-comment"># 例子，查全部数据</span>
<span class="hljs-keyword">select</span> * <span class="hljs-keyword">from</span> city;
<span class="hljs-comment"># 例子，查看部分字段的数据</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">id</span>,<span class="hljs-keyword">NAME</span>,countrycode <span class="hljs-keyword">FROM</span> city;
</div></code></pre>
</li>
<li>
<p>where
筛选过滤</p>
<pre class="hljs"><code><div><span class="hljs-comment"># 示例</span>
<span class="hljs-comment"># 1.where 配合 等值查询</span>
<span class="hljs-comment">-- 查询中国的城市信息</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">id</span>,<span class="hljs-keyword">NAME</span>,countrycode <span class="hljs-keyword">FROM</span> city <span class="hljs-keyword">WHERE</span> countrycode = <span class="hljs-string">'CHN'</span>;

<span class="hljs-comment"># 2.where 配合 不等值查询（&gt; &lt; &gt;= &lt;= &lt;&gt; !=）</span>
<span class="hljs-comment">-- 查询人口小于100人的城市</span>
<span class="hljs-keyword">SELECT</span> * <span class="hljs-keyword">FROM</span> city <span class="hljs-keyword">WHERE</span> population &lt; <span class="hljs-number">100</span>;
<span class="hljs-comment">-- 查询人口大于1千万的城市</span>
<span class="hljs-keyword">SELECT</span> * <span class="hljs-keyword">FROM</span> city <span class="hljs-keyword">WHERE</span> population &gt; <span class="hljs-number">10000000</span>;

<span class="hljs-comment"># 3.where 配合 模糊查询</span>
<span class="hljs-comment">-- 查询国家代号是C开头的国家</span>
<span class="hljs-keyword">SELECT</span> * <span class="hljs-keyword">FROM</span> city <span class="hljs-keyword">WHERE</span> countrycode <span class="hljs-keyword">LIKE</span> <span class="hljs-string">'C%'</span>;
<span class="hljs-comment"># 注意：like语句在MySQL中，尽量不要使用左%，因为效率低，不走索引。</span>

<span class="hljs-comment"># 4.where 配合 逻辑连接符（and or）</span>
<span class="hljs-keyword">SELECT</span> * <span class="hljs-keyword">FROM</span> city <span class="hljs-keyword">WHERE</span> population &gt; <span class="hljs-number">10000</span> <span class="hljs-keyword">and</span> population &lt; <span class="hljs-number">20000</span>;
<span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">id</span>,<span class="hljs-keyword">NAME</span>,countrycode,population <span class="hljs-keyword">FROM</span> city <span class="hljs-keyword">WHERE</span> countrycode <span class="hljs-keyword">in</span> (<span class="hljs-string">'CHN'</span>,<span class="hljs-string">'USA'</span>);
<span class="hljs-comment">## 以上语句建议改写为以下语句</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">id</span>,<span class="hljs-keyword">NAME</span>,countrycode,population <span class="hljs-keyword">FROM</span> city <span class="hljs-keyword">WHERE</span> countrycode = <span class="hljs-string">'CHN'</span>
<span class="hljs-keyword">union</span> <span class="hljs-keyword">all</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">id</span>,<span class="hljs-keyword">NAME</span>,countrycode,population <span class="hljs-keyword">FROM</span> city <span class="hljs-keyword">WHERE</span> countrycode = <span class="hljs-string">'USA'</span>;
</div></code></pre>
</li>
<li>
<p>group by 配合聚合函数应用
聚合函数：
avg()
count()
sum()
max()
min()
group_concat()</p>
<pre class="hljs"><code><div><span class="hljs-comment"># 示例</span>
<span class="hljs-comment">-- 统计每个国家的总人口</span>
<span class="hljs-keyword">SELECT</span> countrycode,<span class="hljs-keyword">SUM</span>(population) <span class="hljs-keyword">AS</span> pop_cnt <span class="hljs-keyword">FROM</span> city <span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> countrycode;
<span class="hljs-comment">-- 统计每个国家的城市个数</span>
<span class="hljs-keyword">SELECT</span> countrycode,<span class="hljs-keyword">COUNT</span>(population) <span class="hljs-keyword">AS</span> cnt <span class="hljs-keyword">FROM</span> city <span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> countrycode;
<span class="hljs-comment">-- 统计并显示每个国家的省名称列表</span>
<span class="hljs-keyword">SELECT</span> countrycode,<span class="hljs-keyword">COUNT</span>(<span class="hljs-keyword">DISTINCT</span> district) <span class="hljs-keyword">AS</span> dis_cnt,<span class="hljs-keyword">GROUP_CONCAT</span>(<span class="hljs-keyword">DISTINCT</span> district) <span class="hljs-keyword">AS</span> dis_list <span class="hljs-keyword">FROM</span> city <span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> countrycode;
<span class="hljs-comment">-- 统计并列出中国每个省的城市名列表</span>
<span class="hljs-keyword">SELECT</span> district,<span class="hljs-keyword">COUNT</span>(<span class="hljs-number">1</span>) <span class="hljs-keyword">AS</span> cnt,<span class="hljs-keyword">GROUP_CONCAT</span>(<span class="hljs-keyword">NAME</span>) <span class="hljs-keyword">AS</span> city_list <span class="hljs-keyword">FROM</span> city <span class="hljs-keyword">WHERE</span> countrycode = <span class="hljs-string">'CHN'</span> <span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> district;
</div></code></pre>
</li>
<li>
<p>having
group by分组后对结果进行过滤</p>
<pre class="hljs"><code><div><span class="hljs-comment">-- 统计中国省的总人口大于1000w的省</span>
<span class="hljs-keyword">SELECT</span> district,<span class="hljs-keyword">SUM</span>(population) <span class="hljs-keyword">AS</span> pop_cnt <span class="hljs-keyword">FROM</span> city <span class="hljs-keyword">WHERE</span> countrycode = <span class="hljs-string">'CHN'</span> <span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> district <span class="hljs-keyword">having</span> <span class="hljs-keyword">sum</span>(population) &gt; <span class="hljs-number">10000000</span>;
</div></code></pre>
</li>
<li>
<p>order by
排序 asc/desc</p>
</li>
<li>
<p>limit</p>
<pre class="hljs"><code><div><span class="hljs-comment"># 示例</span>
<span class="hljs-keyword">SELECT</span> * <span class="hljs-keyword">FROM</span> city <span class="hljs-keyword">WHERE</span> countrycode = <span class="hljs-string">'CHN'</span> <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> population <span class="hljs-keyword">LIMIT</span> <span class="hljs-number">10</span>;
<span class="hljs-keyword">SELECT</span> * <span class="hljs-keyword">FROM</span> city <span class="hljs-keyword">WHERE</span> countrycode = <span class="hljs-string">'CHN'</span> <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> population <span class="hljs-keyword">LIMIT</span> <span class="hljs-number">3</span>,<span class="hljs-number">5</span>;
<span class="hljs-keyword">SELECT</span> * <span class="hljs-keyword">FROM</span> city <span class="hljs-keyword">WHERE</span> countrycode = <span class="hljs-string">'CHN'</span> <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> population <span class="hljs-keyword">LIMIT</span> <span class="hljs-number">5</span> <span class="hljs-keyword">OFFSET</span> <span class="hljs-number">3</span>;
<span class="hljs-comment">-- 总结</span>
<span class="hljs-comment">-- limit m,n 跳过m行，显示n行</span>
<span class="hljs-comment">-- limit x offset y 跳过y行显示x行</span>
</div></code></pre>
</li>
</ul>
</li>
</ul>
<h3 id="%E8%BF%9E%E6%8E%A5">连接</h3>
<ul>
<li>
<p>交叉连接（CROSS JOIN）<br>
交叉连接，得到的结果是两个表的乘积，即笛卡尔积。
使用交叉连接的时候，结果集由第一个表的所有行与第二个表的所有行的结合，表之间不需要关系；<br>
<strong>适合用于</strong>展现两个数据集的所有可能的组合情况，比如在统计中构造连续的数据。
例如：统计每天/周/月的(交易等)数据，为使每天/周/月都有数据，可用交叉连接的方式构造数据；<br>
使用形式如下：</p>
<pre class="hljs"><code><div><span class="hljs-keyword">SELECT</span>  *
<span class="hljs-keyword">FROM</span> T1
<span class="hljs-keyword">CROSS</span> <span class="hljs-keyword">JOIN</span> T2;
</div></code></pre>
</li>
</ul>
<blockquote>
<p>优化点：使用左外连接指定驱动表（小表）来优化内连接；</p>
</blockquote>
<h3 id="informationschematables">information_schema.tables</h3>
<p>元数据储存在基表（无法直接查询和修改）中
-&gt; 使用 DDL 进行元数据修改
-&gt; 使用 show,desc,information_schema(全局的统计和查询) 查看元数据。</p>
<p>最常用到的表是 tables ，主要关注的字段如下：</p>
<pre class="hljs"><code><div><span class="hljs-comment">-- 进入库</span>
<span class="hljs-keyword">use</span> information_schema
<span class="hljs-comment">-- 查看tables表字段</span>
<span class="hljs-keyword">desc</span> <span class="hljs-keyword">tables</span>;
<span class="hljs-comment">-- 主要关注以下字段</span>
TABLE_SCHEMA    表所在的库
TABLE_NAME      表名
ENGINE          表的存储引擎
TABLE_ROWS      表的行数
AVG_ROW_LENGTH  平均行长度
INDEX_LENGTH    索引的长度
</div></code></pre>
<p>常用的查询语句如下：</p>
<pre class="hljs"><code><div><span class="hljs-comment">-- 查询整个数据库中所有的库对应的表名</span>
<span class="hljs-keyword">SELECT</span> TABLE_SCHEMA,TABLE_NAME <span class="hljs-keyword">FROM</span> information_schema.TABLES;
<span class="hljs-comment">-- 查询某个库中的表</span>
<span class="hljs-keyword">SELECT</span> TABLE_SCHEMA,TABLE_NAME <span class="hljs-keyword">FROM</span> information_schema.TABLES <span class="hljs-keyword">WHERE</span> TABLE_SCHEMA = <span class="hljs-string">'world'</span>;

<span class="hljs-comment">-- 统计每个库的真实数据量</span>
<span class="hljs-comment">-- 每张表的数据量=AVG_ROW_LENGTH*TABLE_ROWS+INDEX_LENGTH</span>
<span class="hljs-keyword">SELECT</span> TABLE_SCHEMA,<span class="hljs-keyword">SUM</span>(AVG_ROW_LENGTH * TABLE_ROWS + INDEX_LENGTH)/<span class="hljs-number">1024</span>/<span class="hljs-number">1024</span> <span class="hljs-keyword">AS</span> size_mb
<span class="hljs-keyword">FROM</span> information_schema.TABLES
<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> TABLE_SCHEMA;

<span class="hljs-comment">-- tables表 + concat()函数拼接命令</span>

<span class="hljs-comment">-- 实例1，生产中往往需要备份某些表，例如以下命令</span>
<span class="hljs-comment">-- mysqldump -uroot -p123 world city &gt;/tmp/world_city.sql</span>
<span class="hljs-comment">-- 模仿以上命令，对整个数据库下的1000（很多）张表进行单独备份，并排除掉系统库</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">CONCAT</span>(<span class="hljs-string">"mysqldump -uroot -p123 "</span>,TABLE_SCHEMA,<span class="hljs-string">" "</span>,table_name,<span class="hljs-string">" &gt;/tmp/"</span>,table_schema,<span class="hljs-string">"_"</span>,table_name,<span class="hljs-string">".sql"</span>)
<span class="hljs-keyword">FROM</span> information_schema.TABLES
<span class="hljs-keyword">WHERE</span> TABLE_SCHEMA <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">IN</span> (<span class="hljs-string">'information_schema'</span>,<span class="hljs-string">'mysql'</span>,<span class="hljs-string">'performance_schema'</span>,<span class="hljs-string">'sys'</span>)
<span class="hljs-keyword">INTO</span> <span class="hljs-keyword">OUTFILE</span> <span class="hljs-string">'/tmp/bak.sh'</span>;
<span class="hljs-comment">-- 注意：my.cnf中需要设置 secure-file-priv=/tmp</span>

<span class="hljs-comment">-- 实例2，模仿以下语句，批量实现world库下所有表的操作语句生成</span>
<span class="hljs-comment">-- alter table world.city discard tablespace;</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">CONCAT</span>(<span class="hljs-string">"alter table "</span>,table_schema,<span class="hljs-string">"."</span>,table_name,<span class="hljs-string">" discard tablespace;"</span>)
<span class="hljs-keyword">FROM</span> information_schema.TABLES
<span class="hljs-keyword">WHERE</span> TABLE_SCHEMA = <span class="hljs-string">"world"</span>;
</div></code></pre>
<h3 id="show%E8%AF%AD%E5%8F%A5">show语句</h3>
<pre class="hljs"><code><div><span class="hljs-comment">-- 查看所有库名</span>
<span class="hljs-keyword">show</span> <span class="hljs-keyword">databases</span>;
<span class="hljs-comment">-- 查看当前库下的所有表</span>
<span class="hljs-keyword">show</span> <span class="hljs-keyword">tables</span>;
<span class="hljs-comment">-- 查看world库下的所有表</span>
<span class="hljs-keyword">show</span> <span class="hljs-keyword">tables</span> <span class="hljs-keyword">form</span> world;
<span class="hljs-comment">-- 查看建库语句</span>
<span class="hljs-keyword">show</span> <span class="hljs-keyword">create</span> <span class="hljs-keyword">database</span> world;
<span class="hljs-comment">-- 查看建表语句</span>
<span class="hljs-keyword">show</span> <span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> city;
<span class="hljs-comment">-- 查看用户权限信息</span>
<span class="hljs-keyword">show</span> <span class="hljs-keyword">grants</span> <span class="hljs-keyword">for</span> root@<span class="hljs-string">'localhost'</span>;
<span class="hljs-comment">-- 查看所有的字符集</span>
<span class="hljs-keyword">show</span> <span class="hljs-keyword">charset</span>;
<span class="hljs-comment">-- 查看校对规则</span>
<span class="hljs-keyword">show</span> <span class="hljs-keyword">collation</span>;
<span class="hljs-comment">-- 查看数据库的连接情况</span>
<span class="hljs-keyword">show</span> <span class="hljs-keyword">full</span> <span class="hljs-keyword">processlist</span>;
<span class="hljs-comment">-- 查看数据库的整体状态</span>
<span class="hljs-keyword">show</span> <span class="hljs-keyword">status</span>;
<span class="hljs-comment">-- 模糊查看数据库的状态</span>
<span class="hljs-keyword">show</span> <span class="hljs-keyword">status</span> <span class="hljs-keyword">like</span> <span class="hljs-string">'%lock%'</span>;
<span class="hljs-comment">-- 查看数据库所有的参数情况</span>
<span class="hljs-keyword">show</span> <span class="hljs-keyword">variables</span>;
<span class="hljs-keyword">show</span> <span class="hljs-keyword">variables</span> <span class="hljs-keyword">like</span> <span class="hljs-string">'%character%'</span>;
<span class="hljs-comment">-- 查看所有支持的存储引擎</span>
<span class="hljs-keyword">show</span> <span class="hljs-keyword">engines</span>;
<span class="hljs-comment">-- 查看默认的引擎</span>
<span class="hljs-keyword">show</span> <span class="hljs-keyword">variables</span> <span class="hljs-keyword">like</span> <span class="hljs-string">'default_storage_engine'</span>;
<span class="hljs-comment">-- 查看所有innodb存储引擎状态情况</span>
<span class="hljs-keyword">show</span> <span class="hljs-keyword">engine</span> <span class="hljs-keyword">innodb</span> <span class="hljs-keyword">status</span>;
<span class="hljs-comment">-- 查看二进制日志情况</span>
<span class="hljs-keyword">show</span> <span class="hljs-built_in">binary</span> <span class="hljs-keyword">logs</span>;
<span class="hljs-comment">-- 查看二进制日志事件</span>
<span class="hljs-keyword">show</span> <span class="hljs-keyword">binlog</span> <span class="hljs-keyword">events</span> <span class="hljs-keyword">in</span>;
<span class="hljs-comment">-- 查看relay日志事件</span>
<span class="hljs-keyword">show</span> <span class="hljs-keyword">relaylog</span> <span class="hljs-keyword">events</span> <span class="hljs-keyword">in</span>;
<span class="hljs-comment">-- 查看从库状态</span>
<span class="hljs-keyword">show</span> <span class="hljs-keyword">slave</span> <span class="hljs-keyword">status</span>;
<span class="hljs-comment">-- 查看数据库binlog位置信息</span>
<span class="hljs-keyword">show</span> <span class="hljs-keyword">master</span> <span class="hljs-keyword">status</span>;
<span class="hljs-comment">-- 查看表的索引情况</span>
<span class="hljs-keyword">show</span> <span class="hljs-keyword">index</span> <span class="hljs-keyword">from</span> city;
</div></code></pre>
<h3 id="%E6%97%A5%E6%9C%9F%E6%88%96%E6%97%B6%E9%97%B4%E6%A0%BC%E5%BC%8F%E5%8C%96">日期或时间格式化</h3>
<ul>
<li>
<p>格式化(date_format)<br>
定义<br>
DATE_FORMAT() 函数用于以不同的格式显示日期/时间数据。</p>
<p>语法</p>
<pre class="hljs"><code><div>DATE_FORMAT(date,format)
</div></code></pre>
<blockquote>
<p>date 参数是合法的日期。format 规定日期/时间的输出格式。</p>
</blockquote>
<p>可以使用的格式有：</p>
<table>
<thead>
<tr>
<th style="text-align:left">模式</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">%a</td>
<td style="text-align:left">缩写星期名</td>
</tr>
<tr>
<td style="text-align:left">%b</td>
<td style="text-align:left">缩写月名</td>
</tr>
<tr>
<td style="text-align:left">%c</td>
<td style="text-align:left">月，数值</td>
</tr>
<tr>
<td style="text-align:left">%D</td>
<td style="text-align:left">带有英文前缀的月中的天</td>
</tr>
<tr>
<td style="text-align:left">%d</td>
<td style="text-align:left">月的天，数值(00-31)</td>
</tr>
<tr>
<td style="text-align:left">%e</td>
<td style="text-align:left">月的天，数值(0-31)</td>
</tr>
<tr>
<td style="text-align:left">%f</td>
<td style="text-align:left">微秒</td>
</tr>
<tr>
<td style="text-align:left">%H</td>
<td style="text-align:left">小时 (00-23)</td>
</tr>
<tr>
<td style="text-align:left">%h</td>
<td style="text-align:left">小时 (01-12)</td>
</tr>
<tr>
<td style="text-align:left">%I</td>
<td style="text-align:left">小时 (01-12)</td>
</tr>
<tr>
<td style="text-align:left">%i</td>
<td style="text-align:left">分钟，数值(00-59)</td>
</tr>
<tr>
<td style="text-align:left">%j</td>
<td style="text-align:left">年的天 (001-366)</td>
</tr>
<tr>
<td style="text-align:left">%k</td>
<td style="text-align:left">小时 (0-23)</td>
</tr>
<tr>
<td style="text-align:left">%l</td>
<td style="text-align:left">小时 (1-12)</td>
</tr>
<tr>
<td style="text-align:left">%M</td>
<td style="text-align:left">月名</td>
</tr>
<tr>
<td style="text-align:left">%m</td>
<td style="text-align:left">月，数值(00-12)</td>
</tr>
<tr>
<td style="text-align:left">%p</td>
<td style="text-align:left">AM 或 PM</td>
</tr>
<tr>
<td style="text-align:left">%r</td>
<td style="text-align:left">时间，12-小时（hh:mm:ss AM 或 PM）</td>
</tr>
<tr>
<td style="text-align:left">%S</td>
<td style="text-align:left">秒(00-59)</td>
</tr>
<tr>
<td style="text-align:left">%s</td>
<td style="text-align:left">秒(00-59)</td>
</tr>
<tr>
<td style="text-align:left">%T</td>
<td style="text-align:left">时间, 24-小时 (hh:mm:ss)</td>
</tr>
<tr>
<td style="text-align:left">%U</td>
<td style="text-align:left">周 (00-53) 星期日是一周的第一天</td>
</tr>
<tr>
<td style="text-align:left">%u</td>
<td style="text-align:left">周 (00-53) 星期一是一周的第一天</td>
</tr>
<tr>
<td style="text-align:left">%V</td>
<td style="text-align:left">周 (01-53) 星期日是一周的第一天，与 %X 使用</td>
</tr>
<tr>
<td style="text-align:left">%v</td>
<td style="text-align:left">周 (01-53) 星期一是一周的第一天，与 %x 使用</td>
</tr>
<tr>
<td style="text-align:left">%W</td>
<td style="text-align:left">星期名</td>
</tr>
<tr>
<td style="text-align:left">%w</td>
<td style="text-align:left">周的天 （0=星期日, 6=星期六）</td>
</tr>
<tr>
<td style="text-align:left">%X</td>
<td style="text-align:left">年，其中的星期日是周的第一天，4 位，与 %V 使用</td>
</tr>
<tr>
<td style="text-align:left">%x</td>
<td style="text-align:left">年，其中的星期一是周的第一天，4 位，与 %v 使用</td>
</tr>
<tr>
<td style="text-align:left">%Y</td>
<td style="text-align:left">年，4 位</td>
</tr>
<tr>
<td style="text-align:left">%y</td>
<td style="text-align:left">年，2 位</td>
</tr>
</tbody>
</table>
<p>示例：</p>
<pre class="hljs"><code><div><span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">date_format</span>(<span class="hljs-keyword">CURDATE</span>(), <span class="hljs-string">'%Y-%m-%d %h:%m:%s'</span>);
<span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">date_format</span>(<span class="hljs-keyword">CURDATE</span>(), <span class="hljs-string">'%Y/%m/%d'</span>);
<span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">STR_TO_DATE</span>(<span class="hljs-string">'2016-08-08'</span>, <span class="hljs-string">'%Y-%m-%d %h:%m:%s'</span>);
<span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">DATE_FORMAT</span>(<span class="hljs-keyword">NOW</span>(),<span class="hljs-string">'%Y%m%d'</span>);
</div></code></pre>
</li>
<li>
<p>毫秒数与日期转化</p>
<pre class="hljs"><code><div><span class="hljs-comment">-- 毫秒数转化为日期</span>
<span class="hljs-keyword">select</span> FROM_UNIXTIME(<span class="hljs-number">1364176514656</span>/<span class="hljs-number">1000</span>,<span class="hljs-string">'%Y-%m-%d %h:%i:%s'</span>) <span class="hljs-keyword">as</span> dt;
<span class="hljs-comment">-- 日期转化为毫秒数</span>
<span class="hljs-keyword">select</span> <span class="hljs-keyword">UNIX_TIMESTAMP</span>(<span class="hljs-string">'2011-05-31 23:59:59'</span>);
</div></code></pre>
</li>
</ul>
<h3 id="%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8Fregexp">正则表达式（regexp）</h3>
<ul>
<li>
<p>操作符</p>
<table>
<thead>
<tr>
<th style="text-align:left">模式</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">^</td>
<td style="text-align:left">匹配输入字符串的开始位置。如果设置了 RegExp 对象的 Multiline 属性，^ 也匹配 '\n' 或 '\r' 之后的位置</td>
</tr>
<tr>
<td style="text-align:left">$</td>
<td style="text-align:left">匹配输入字符串的结束位置。如果设置了RegExp 对象的 Multiline 属性，$ 也匹配 '\n' 或 '\r' 之前的位置</td>
</tr>
<tr>
<td style="text-align:left">.</td>
<td style="text-align:left">匹配除 &quot;\n&quot; 之外的任何单个字符。要匹配包括 '\n' 在内的任何字符，请使用象 '[.\n]' 的模式</td>
</tr>
<tr>
<td style="text-align:left">[...]</td>
<td style="text-align:left">字符集合。匹配所包含的任意一个字符。例如， '[abc]' 可以匹配 &quot;plain&quot; 中的 'a'</td>
</tr>
<tr>
<td style="text-align:left">[^...]</td>
<td style="text-align:left">负值字符集合。匹配未包含的任意字符。例如， '[^abc]' 可以匹配 &quot;plain&quot; 中的'p'</td>
</tr>
<tr>
<td style="text-align:left">p1|p2|p3</td>
<td style="text-align:left">匹配 p1 或 p2 或 p3。例如，'z|food' 能匹配 &quot;z&quot; 或 &quot;food&quot;。'(z|f)ood' 则匹配 &quot;zood&quot; 或 &quot;food&quot;</td>
</tr>
<tr>
<td style="text-align:left">*</td>
<td style="text-align:left">匹配前面的子表达式零次或多次。例如，zo* 能匹配 &quot;z&quot; 以及 &quot;zoo&quot;。* 等价于{0,}</td>
</tr>
<tr>
<td style="text-align:left">+</td>
<td style="text-align:left">匹配前面的子表达式一次或多次。例如，'zo+' 能匹配 &quot;zo&quot; 以及 &quot;zoo&quot;，但不能匹配 &quot;z&quot;。+ 等价于 {1,}</td>
</tr>
<tr>
<td style="text-align:left">{n}</td>
<td style="text-align:left">n 是一个非负整数。匹配确定的 n 次。例如，'o{2}' 不能匹配 &quot;Bob&quot; 中的 'o'，但是能匹配 &quot;food&quot; 中的两个 o</td>
</tr>
<tr>
<td style="text-align:left">{n,m}</td>
<td style="text-align:left">m 和 n 均为非负整数，其中n &lt;= m。最少匹配 n 次且最多匹配 m 次</td>
</tr>
</tbody>
</table>
</li>
<li>
<p>实例</p>
<ul>
<li>
<p>匹配连续数字</p>
<pre class="hljs"><code><div><span class="hljs-keyword">SELECT</span> * <span class="hljs-keyword">FROM</span> ofchatlog a <span class="hljs-keyword">WHERE</span> a.<span class="hljs-string">`sender`</span> REGEXP <span class="hljs-string">'jf[0-9]{5}'</span> <span class="hljs-keyword">LIMIT</span> <span class="hljs-number">10</span>;
</div></code></pre>
</li>
<li>
<p>匹配三个字符串(或的关系)</p>
<pre class="hljs"><code><div><span class="hljs-keyword">SELECT</span> *
<span class="hljs-keyword">FROM</span> ofchatlog a
<span class="hljs-keyword">WHERE</span> a.sender REGEXP <span class="hljs-string">'xx1|xx2|xx3'</span>;
</div></code></pre>
</li>
<li>
<p>不匹配(包含)<br>
用<code>not regexp 'xxx'</code></p>
</li>
</ul>
</li>
</ul>
<h3 id="%E5%AE%9E%E7%8E%B0%E5%88%86%E7%BB%84%E6%8E%92%E5%BA%8F%E7%B1%BB%E4%BC%BC%E5%BC%80%E7%AA%97%E5%87%BD%E6%95%B0">实现分组排序，类似开窗函数</h3>
<blockquote>
<p>类似Oracle和SqlServer的 函数名(列) OVER(选项)
格式row_number() over(partition by )</p>
</blockquote>
<ul>
<li>
<p>用变量实现</p>
<p>示例1：</p>
<pre class="hljs"><code><div><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> heyf_t10 (empid <span class="hljs-built_in">int</span> ,deptid <span class="hljs-built_in">int</span> ,salary <span class="hljs-built_in">decimal</span>(<span class="hljs-number">10</span>,<span class="hljs-number">2</span>) );

<span class="hljs-keyword">select</span> empid,deptid,salary,<span class="hljs-keyword">rank</span>
<span class="hljs-keyword">from</span> (
    <span class="hljs-keyword">select</span> heyf_tmp.empid,heyf_tmp.deptid,heyf_tmp.salary,@<span class="hljs-keyword">rownum</span>:=@<span class="hljs-keyword">rownum</span>+<span class="hljs-number">1</span>,
        <span class="hljs-keyword">if</span>(@pdept=heyf_tmp.deptid,@<span class="hljs-keyword">rank</span>:=@<span class="hljs-keyword">rank</span>+<span class="hljs-number">1</span>,@<span class="hljs-keyword">rank</span>:=<span class="hljs-number">1</span>) <span class="hljs-keyword">as</span> <span class="hljs-keyword">rank</span>,
        @pdept:=heyf_tmp.deptid
    <span class="hljs-keyword">from</span> (
        <span class="hljs-keyword">select</span> empid,deptid,salary
        <span class="hljs-keyword">from</span> heyf_t10
        <span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> deptid <span class="hljs-keyword">asc</span> ,salary <span class="hljs-keyword">desc</span>
    ) heyf_tmp ,(<span class="hljs-keyword">select</span> @<span class="hljs-keyword">rownum</span> := <span class="hljs-number">0</span> , @pdept := <span class="hljs-literal">null</span> ,@<span class="hljs-keyword">rank</span> := <span class="hljs-number">0</span>) a
) <span class="hljs-keyword">result</span>;
</div></code></pre>
<p>示例2：</p>
<pre class="hljs"><code><div><span class="hljs-keyword">SELECT</span>
    <span class="hljs-comment">-- rownum 判断@sp_id 是否与当前的sp_id一致，一致加1，否则重置为1</span>
    <span class="hljs-keyword">IF</span>(@sp_id = a.sp_id,@i := @i + <span class="hljs-number">1</span>,@i := <span class="hljs-number">1</span>) <span class="hljs-keyword">rownum</span>
    ,a.*
    <span class="hljs-comment">-- 设置@sp_id 等于上一个 sp_id</span>
    ,(@sp_id := a.sp_id)
<span class="hljs-keyword">FROM</span> jf_sp_contact a,(<span class="hljs-keyword">SELECT</span> @i := <span class="hljs-number">0</span>,@sp_id := <span class="hljs-number">0</span>) <span class="hljs-keyword">AS</span> b
<span class="hljs-keyword">WHERE</span> a.sp_id = <span class="hljs-number">3334</span>
</div></code></pre>
<blockquote>
<p>注意：示例1生效，而示例2无效，原因是该逻辑是针对按规则进行排序的数据进行标识；</p>
</blockquote>
</li>
</ul>
<h2 id="%E7%B4%A2%E5%BC%95">索引</h2>
<h3 id="%E5%88%9B%E5%BB%BA%E7%B4%A2%E5%BC%95">创建索引</h3>
<ul>
<li>
<p><code>ALTER TABLE</code> 命令用来创建索引</p>
<pre class="hljs"><code><div><span class="hljs-comment">-- 创建普通索引</span>
<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> table_name <span class="hljs-keyword">ADD</span> <span class="hljs-keyword">INDEX</span> index_name(column_name);
<span class="hljs-comment">-- 创建唯一索引（数据列值不唯一不能建）</span>
<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> table_name <span class="hljs-keyword">ADD</span> <span class="hljs-keyword">UNIQUE</span> <span class="hljs-keyword">INDEX</span> idx_name(column_name);
<span class="hljs-comment">-- 创建主键索引</span>
<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> table_name <span class="hljs-keyword">ADD</span> PRIMARY <span class="hljs-keyword">KEY</span> (column_name);
<span class="hljs-comment">-- 创建前缀索引（只能针对字符串列，列名+数字代表只对前几个字符创建索引）</span>
<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> table_name <span class="hljs-keyword">ADD</span> <span class="hljs-keyword">INDEX</span> index_name(column_name(<span class="hljs-number">5</span>));
<span class="hljs-comment">-- 创建联合索引</span>
<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> table_name <span class="hljs-keyword">ADD</span> <span class="hljs-keyword">INDEX</span> index_name(column_name1,column_name2...);
</div></code></pre>
</li>
<li>
<p><code>CREATE INDEX</code> 命令可对表增加辅助索引或唯一索引</p>
<pre class="hljs"><code><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">INDEX</span> index_name <span class="hljs-keyword">ON</span> table_name (column_name);
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">UNIQUE</span> <span class="hljs-keyword">INDEX</span> index_name <span class="hljs-keyword">ON</span> table_name (column_name);
</div></code></pre>
<blockquote>
<p>不能用 CREATE INDEX 命令创建PRIMARY KEY索引。</p>
</blockquote>
</li>
</ul>
<h3 id="%E5%88%A0%E9%99%A4%E7%B4%A2%E5%BC%95">删除索引</h3>
<pre class="hljs"><code><div><span class="hljs-keyword">DROP</span> <span class="hljs-keyword">INDEX</span> index_name <span class="hljs-keyword">ON</span> talbe_name;
<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> table_name <span class="hljs-keyword">DROP</span> <span class="hljs-keyword">INDEX</span> index_name;
<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> table_name <span class="hljs-keyword">DROP</span> PRIMARY <span class="hljs-keyword">KEY</span>;
</div></code></pre>
<blockquote>
<p>前两条相同，第三条在主键时用；</p>
</blockquote>
<h3 id="%E6%9F%A5%E7%9C%8B%E8%A1%A8%E7%9A%84%E7%B4%A2%E5%BC%95">查看表的索引</h3>
<ul>
<li>
<p>查看表所有索引的具体情况</p>
<pre class="hljs"><code><div><span class="hljs-keyword">SHOW</span> <span class="hljs-keyword">KEYS</span> <span class="hljs-keyword">FROM</span> tablename;
<span class="hljs-keyword">SHOW</span> <span class="hljs-keyword">INDEX</span> <span class="hljs-keyword">FROM</span> tablename;
</div></code></pre>
<blockquote>
<p>注释：
Table 表的名称。<br>
Non_unique 如果索引不能包括重复词，则为0。如果可以，则为1。<br>
Key_name 索引的名称。<br>
Seq_in_index 索引中的列序列号，从1开始。<br>
Column_name 列名称。<br>
Collation 列以什么方式存储在索引中。在MySQL中，有值‘A’（升序）或NULL（无分类）。<br>
Cardinality 索引中唯一值的数目的估计值。通过运行ANALYZE TABLE或myisamchk -a可以更新。基数根据被存储为整数的统计数据来计数，所以即使对于小型表，该值也没有必要是精确的。基数越大，当进行联合时，MySQL使用该索引的机会就越大。<br>
Sub_part 如果列只是被部分地编入索引，则为被编入索引的字符的数目。如果整列被编入索引，则为NULL。<br>
Packed 指示关键字如何被压缩。如果没有被压缩，则为NULL。<br>
Null 如果列含有NULL，则含有YES。如果没有，则该列含有NO。<br>
Index_type 用过的索引方法（BTREE, FULLTEXT, HASH, RTREE）。</p>
</blockquote>
</li>
<li>
<p>使用 information_schema 元数据查看索引信息</p>
<pre class="hljs"><code><div><span class="hljs-comment">-- 查看某一个库下某一张表的索引</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">DISTINCT</span>
    <span class="hljs-keyword">lower</span>(index_name) index_name,
    <span class="hljs-keyword">lower</span>(index_type) <span class="hljs-keyword">type</span>
<span class="hljs-keyword">FROM</span>
    information_schema.statistics
<span class="hljs-keyword">WHERE</span>
    table_schema = <span class="hljs-string">'employees'</span> <span class="hljs-keyword">AND</span> table_name = <span class="hljs-string">'employees'</span>;

<span class="hljs-comment">-- 查看某一个库下某一张表的某一个索引</span>
<span class="hljs-keyword">SELECT</span>
    <span class="hljs-keyword">lower</span>(column_name) column_name,
    seq_in_index column_position
<span class="hljs-keyword">FROM</span>
    information_schema.statistics
<span class="hljs-keyword">WHERE</span>
    table_schema = <span class="hljs-string">'employees'</span> <span class="hljs-keyword">AND</span> table_name = <span class="hljs-string">'employees'</span> <span class="hljs-keyword">AND</span> index_name = <span class="hljs-string">'primary'</span>;
</div></code></pre>
</li>
</ul>
<h2 id="%E6%89%A7%E8%A1%8C%E8%AE%A1%E5%88%92%E7%AE%A1%E7%90%86%E5%9F%BA%E7%A1%80%E4%BC%98%E5%8C%96">执行计划管理（基础优化）</h2>
<h3 id="%E8%8E%B7%E5%8F%96%E6%89%A7%E8%A1%8C%E8%AE%A1%E5%88%92">获取执行计划</h3>
<p>获取查询语句的简化执行计划</p>
<pre class="hljs"><code><div><span class="hljs-keyword">EXPLAIN</span>
<span class="hljs-keyword">SELECT</span> * <span class="hljs-keyword">FROM</span> tablename <span class="hljs-keyword">LIMIT</span> <span class="hljs-number">10</span>;
<span class="hljs-comment">-- 或者</span>
DESC
<span class="hljs-keyword">SELECT</span> * <span class="hljs-keyword">FROM</span> tablename <span class="hljs-keyword">LIMIT</span> <span class="hljs-number">10</span>;
</div></code></pre>
<ul>
<li>
<p>表结构优化建议</p>
<pre class="hljs"><code><div><span class="hljs-keyword">select</span> <span class="hljs-keyword">column</span> <span class="hljs-keyword">from</span> table_name <span class="hljs-keyword">procedure</span> analyse();
</div></code></pre>
</li>
<li>
<p>强制使用某索引</p>
<pre class="hljs"><code><div>FORCE INDEX(索引名)
</div></code></pre>
</li>
<li>
<p>查询是否有表被锁</p>
<pre class="hljs"><code><div><span class="hljs-keyword">show</span> <span class="hljs-keyword">OPEN</span> <span class="hljs-keyword">TABLES</span> <span class="hljs-keyword">where</span> In_use &gt; <span class="hljs-number">0</span>;
</div></code></pre>
</li>
</ul>
<h2 id="%E8%BF%87%E7%A8%8B%E4%BD%9C%E4%B8%9A%E5%92%8C%E8%A7%A6%E5%8F%91%E5%99%A8">过程，作业和触发器</h2>
<ul>
<li>
<p>查询作业</p>
<pre class="hljs"><code><div><span class="hljs-keyword">SELECT</span> a.name,b.command
<span class="hljs-keyword">FROM</span> msdb.dbo.sysjobs a
<span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> msdb.dbo.sysjobsteps b <span class="hljs-keyword">ON</span> a.job_id = b.job_id
<span class="hljs-keyword">WHERE</span> b.command <span class="hljs-keyword">LIKE</span> <span class="hljs-string">'%P_GZ_HeavyPaste_UpOrder%'</span>;
</div></code></pre>
</li>
<li>
<p>查询过程</p>
<pre class="hljs"><code><div><span class="hljs-keyword">SELECT</span> a.name,b.text
<span class="hljs-keyword">FROM</span> sys.objects a
<span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> sys.syscomments b <span class="hljs-keyword">ON</span> a.object_id = b.id
<span class="hljs-keyword">WHERE</span> a.type = <span class="hljs-string">'P'</span> <span class="hljs-keyword">AND</span> b.text <span class="hljs-keyword">LIKE</span> <span class="hljs-string">'%T_SEM_PostSnap%'</span>;
</div></code></pre>
</li>
<li>
<p>判断库中是否存在包含<code>order</code>的存储过程</p>
<pre class="hljs"><code><div><span class="hljs-keyword">SELECT</span> * <span class="hljs-keyword">FROM</span> information_schema.ROUTINES a <span class="hljs-keyword">WHERE</span> a.SPECIFIC_NAME <span class="hljs-keyword">LIKE</span> <span class="hljs-string">'%order%'</span>;
</div></code></pre>
</li>
<li>
<p>查询触发器</p>
<pre class="hljs"><code><div><span class="hljs-keyword">SELECT</span> * <span class="hljs-keyword">FROM</span> sys.objects <span class="hljs-keyword">WHERE</span> <span class="hljs-keyword">TYPE</span> = <span class="hljs-string">'tr'</span>;
</div></code></pre>
</li>
<li>
<p>查询视图</p>
<pre class="hljs"><code><div><span class="hljs-keyword">SELECT</span> * <span class="hljs-keyword">FROM</span> sys.objects <span class="hljs-keyword">WHERE</span> xtype=<span class="hljs-string">'V'</span>;
</div></code></pre>
</li>
</ul>

</body>
</html>
